[
  // 导入系统模块
  {
    "import": ["!system"]
  },
  
  // 打印标题
  {
    "println": "开始测试系统文件系统功能"
  },
  
  // 创建临时目录
  {
    "var.set": {
      "name": "test_dir",
      "value": "temp_test_dir"
    }
  },
  
  // 检查目录是否存在，如果存在则先删除
  {
    "if": {
      "condition": {
        "system.fs.exists": {
          "path": {
            "var": "test_dir"
          }
        }
      },
      "then": {
        "system.fs.remove": {
          "path": {
            "var": "test_dir"
          },
          "recursive": true
        }
      }
    }
  },
  
  // 创建测试目录
  {
    "println": "创建测试目录..."
  },
  {
    "var.set": {
      "name": "mkdir_result",
      "value": {
        "system.fs.mkdir": {
          "path": {
            "var": "test_dir"
          }
        }
      }
    }
  },
  {
    "println": {
      "string.concat": [
        "创建目录结果: ",
        {
          "var": "mkdir_result"
        }
      ]
    }
  },
  
  // 检查目录是否存在
  {
    "var.set": {
      "name": "exists_result",
      "value": {
        "system.fs.exists": {
          "path": {
            "var": "test_dir"
          }
        }
      }
    }
  },
  {
    "println": {
      "string.concat": [
        "目录存在检查: ",
        {
          "var": "exists_result"
        }
      ]
    }
  },
  
  // 检查是否为目录
  {
    "var.set": {
      "name": "is_dir_result",
      "value": {
        "system.fs.isDir": {
          "path": {
            "var": "test_dir"
          }
        }
      }
    }
  },
  {
    "println": {
      "string.concat": [
        "是否为目录: ",
        {
          "var": "is_dir_result"
        }
      ]
    }
  },
  
  // 创建测试文件
  {
    "var.set": {
      "name": "test_file",
      "value": {
        "string.concat": [
          {
            "var": "test_dir"
          },
          "/test_file.txt"
        ]
      }
    }
  },
  {
    "io.writeFile": {
      "path": {
        "var": "test_file"
      },
      "content": "这是一个测试文件内容"
    }
  },
  {
    "println": "创建测试文件成功"
  },
  
  // 检查文件是否存在
  {
    "var.set": {
      "name": "file_exists_result",
      "value": {
        "system.fs.exists": {
          "path": {
            "var": "test_file"
          }
        }
      }
    }
  },
  {
    "println": {
      "string.concat": [
        "文件存在检查: ",
        {
          "var": "file_exists_result"
        }
      ]
    }
  },
  
  // 检查是否为文件
  {
    "var.set": {
      "name": "is_file_result",
      "value": {
        "system.fs.isFile": {
          "path": {
            "var": "test_file"
          }
        }
      }
    }
  },
  {
    "println": {
      "string.concat": [
        "是否为文件: ",
        {
          "var": "is_file_result"
        }
      ]
    }
  },
  
  // 列出目录内容
  {
    "var.set": {
      "name": "list_result",
      "value": {
        "system.fs.list": {
          "path": {
            "var": "test_dir"
          },
          "includeInfo": true
        }
      }
    }
  },
  {
    "println": {
      "string.concat": [
        "目录内容: ",
        {
          "var": "list_result"
        }
      ]
    }
  },
  
  // 创建子目录
  {
    "var.set": {
      "name": "sub_dir",
      "value": {
        "string.concat": [
          {
            "var": "test_dir"
          },
          "/sub_dir"
        ]
      }
    }
  },
  {
    "system.fs.mkdir": {
      "path": {
        "var": "sub_dir"
      }
    }
  },
  {
    "println": "创建子目录成功"
  },
  
  // 复制文件
  {
    "var.set": {
      "name": "copy_dest",
      "value": {
        "string.concat": [
          {
            "var": "sub_dir"
          },
          "/copied_file.txt"
        ]
      }
    }
  },
  {
    "var.set": {
      "name": "copy_result",
      "value": {
        "system.fs.copy": {
          "from": {
            "var": "test_file"
          },
          "to": {
            "var": "copy_dest"
          }
        }
      }
    }
  },
  {
    "println": {
      "string.concat": [
        "复制文件结果: ",
        {
          "var": "copy_result"
        }
      ]
    }
  },
  
  // 检查复制的文件是否存在
  {
    "var.set": {
      "name": "copy_exists_result",
      "value": {
        "system.fs.exists": {
          "path": {
            "var": "copy_dest"
          }
        }
      }
    }
  },
  {
    "println": {
      "string.concat": [
        "复制的文件存在检查: ",
        {
          "var": "copy_exists_result"
        }
      ]
    }
  },
  
  // 移动文件
  {
    "var.set": {
      "name": "move_dest",
      "value": {
        "string.concat": [
          {
            "var": "test_dir"
          },
          "/moved_file.txt"
        ]
      }
    }
  },
  {
    "var.set": {
      "name": "move_result",
      "value": {
        "system.fs.move": {
          "from": {
            "var": "test_file"
          },
          "to": {
            "var": "move_dest"
          }
        }
      }
    }
  },
  {
    "println": {
      "string.concat": [
        "移动文件结果: ",
        {
          "var": "move_result"
        }
      ]
    }
  },
  
  // 检查原文件是否不存在，移动后的文件是否存在
  {
    "var.set": {
      "name": "original_exists_result",
      "value": {
        "system.fs.exists": {
          "path": {
            "var": "test_file"
          }
        }
      }
    }
  },
  {
    "var.set": {
      "name": "moved_exists_result",
      "value": {
        "system.fs.exists": {
          "path": {
            "var": "move_dest"
          }
        }
      }
    }
  },
  {
    "println": {
      "string.concat": [
        "原文件存在检查: ",
        {
          "var": "original_exists_result"
        }
      ]
    }
  },
  {
    "println": {
      "string.concat": [
        "移动后的文件存在检查: ",
        {
          "var": "moved_exists_result"
        }
      ]
    }
  },
  
  // 再次列出目录内容，查看变化
  {
    "var.set": {
      "name": "final_list_result",
      "value": {
        "system.fs.list": {
          "path": {
            "var": "test_dir"
          }
        }
      }
    }
  },
  {
    "println": {
      "string.concat": [
        "最终目录内容: ",
        {
          "var": "final_list_result"
        }
      ]
    }
  },
  
  // 清理测试目录
  {
    "println": "清理测试目录..."
  },
  {
    "var.set": {
      "name": "cleanup_result",
      "value": {
        "system.fs.remove": {
          "path": {
            "var": "test_dir"
          },
          "recursive": true
        }
      }
    }
  },
  {
    "println": {
      "string.concat": [
        "清理结果: ",
        {
          "var": "cleanup_result"
        }
      ]
    }
  },
  
  // 检查目录是否已删除
  {
    "var.set": {
      "name": "final_exists_result",
      "value": {
        "system.fs.exists": {
          "path": {
            "var": "test_dir"
          }
        }
      }
    }
  },
  {
    "println": {
      "string.concat": [
        "测试目录存在检查: ",
        {
          "var": "final_exists_result"
        }
      ]
    }
  },
  
  // 测试结束
  {
    "println": "系统文件系统功能测试完成"
  },
  
  {
    "return": "测试成功"
  }
] 